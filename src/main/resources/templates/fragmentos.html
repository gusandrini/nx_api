
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <th:block th:fragment="head(title)">
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title th:text="${title}">NEXO</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />
        <link rel="stylesheet" th:href="@{/css/nexo.css}" />
            <style>
            .nexo-logo { height:64px; max-height:64px; }
            @media (max-width:576px) { .nexo-logo { height:48px; max-height:48px; } }
            /* keep header spacing but use colors from nexo.css */
            .header-title { margin-left:0.75rem; font-weight:700; font-size:1.05rem; color:var(--nexo-dark); }
            header.nexo-header { padding:12px 0; box-shadow: 0 1px 0 rgba(0,0,0,0.04); background: #f5f6fa !important; }
            .header-logout-btn { font-size:1.2rem; color:#444; border:0; background:#ededed; display:inline-flex; align-items:center; gap:0.5rem; border-radius:50%; min-width:40px; min-height:40px; transition:background 0.2s, color 0.2s; }
            .header-logout-btn:hover { background:#e0e0e0; color:#0033ff; text-decoration:none; }
            @media(min-width:768px){ .header-title{ color: #222 } .header-logout-btn{ color: #444 } }
        </style>
    </th:block>
</head>
<body>
    <div th:fragment="header(title)">
        <header class="nexo-header" style="background:#f5f6fa;">
            <div class="container d-flex align-items-center gap-3">
                <a th:href="@{/}" class="d-flex align-items-center me-3">
                    <img th:src="@{/images/NX.png}" alt="NX Logo" class="nexo-logo" style="height:60px;max-height:60px;background:transparent;border-radius:50%;box-shadow:0 2px 12px #b3c6ff;" onerror="this.style.display='none'" />
                </a>
                <div class="d-flex flex-column flex-md-row align-items-center flex-grow-1">
                    <h1 class="header-title mb-0 flex-grow-1" th:text="${title}" style="font-size:1.5rem;font-weight:900;letter-spacing:1px;color:#1e3c72;text-shadow:0 2px 8px #e0eaff;">TÃ­tulo</h1>
                </div>
                <div class="ms-auto d-flex align-items-center gap-3">
                    <form th:action="@{/logout}" method="post"
                          th:if="${T(org.springframework.security.core.context.SecurityContextHolder).getContext().getAuthentication() != null and T(org.springframework.security.core.context.SecurityContextHolder).getContext().getAuthentication().principal != 'anonymousUser'}">
                        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                        <button type="submit" class="header-logout-btn d-flex align-items-center justify-content-center border-0" title="Sair" aria-label="Sair">
                            <i class="bi bi-box-arrow-right" aria-hidden="true" style="font-size:1.5rem;"></i>
                        </button>
                    </form>
                          <!-- Language Switcher: i18n, visual moderno -->
                          <div class="d-flex align-items-center gap-2 ms-2 px-2 py-1 rounded" style="background:#fffbe6;border:1px solid #ffe066;box-shadow:0 1px 4px #ffe06633;">
                                <span class="me-1 small" style="color:#1e3c72;opacity:0.7;" th:text="#{menu.idioma}">Idioma</span>
                                <a th:href="@{/(lang='pt')}"
                                    th:classappend="${#locale.language == 'pt'} ? 'fw-bold' : 'text-secondary'"
                                    class="btn btn-link p-0" style="font-size:1rem;color:#1e3c72;">PT</a>
                                <span class="mx-1" style="color:#ffe066;">|</span>
                                <a th:href="@{/(lang='en')}"
                                    th:classappend="${#locale.language == 'en'} ? 'fw-bold' : 'text-secondary'"
                                    class="btn btn-link p-0" style="font-size:1rem;color:#1e3c72;">EN</a>
                          </div>
                </div>
            </div>
        </header>
    </div>
</body>
</html>
